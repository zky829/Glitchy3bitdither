---
layout: template
---

<h1>Glitchy 3bit dither demo</h1>
<p>Pick an image, to see what each algorithm does. This may take a minute, and freeze up your browser</p>
<div id="form">
    <input type="file" id="uploader"/>
    <label>Enable experimental functions? <input type="checkbox" id="experimental" /></label>
</div>
<div id="output"></div>
<script>
    function handleFileSelect(e) {
        var file = e.target.files[0];
        // Only process image files.
        if (!file.type.match('image.*')) {
            return;
        }
        var reader = new FileReader();
        // Closure to capture the file information.
        reader.onload = function(e) {
            var img = document.createElement("img");
            img.onload = function() {
                var width = img.width;
                var height = img.height;
                var canvas = document.createElement('canvas');
                canvas.width = width;
                canvas.height = height;
                var ctx = canvas.getContext('2d');
                ctx.drawImage(img, 0, 0);
                // drawDitherResult(canvas, 'original', 'original');
                var exp = ['pixelFunk', 'superPixelFunk', 'shortsort', 'shortdumbsort', 'sort', 'slicesort', 'sortStripe', 'sortRows', 'randomSortRows', 'dumbSortRows', 'pixelSort', 'randomGlitch', 'glitch', 'preset1', 'preset2', 'preset3', 'preset4'];
                var orig = ['original', 'focusImage', 'rgb_glitch', 'invert', 'slice', 'slice2', 'slice3', 'scanlines', 'fractalGhosts', 'fractalGhosts2', 'fractalGhosts3', 'fractalGhosts4', 'fractal', 'fractal2', 'DrumrollHorizontal', 'DrumrollVertical', 'DrumrollHorizontalWave', 'DrumrollVerticalWave', 'ditherBitmask', 'colorShift', 'colorShift2', 'ditherRandom', 'ditherRandom3', 'ditherBayer', 'ditherBayer3', 'redShift', 'greenShift', 'blueShift', 'superShift', 'superSlice', 'superSlice2', 'ditherAtkinsons', 'ditherFloydSteinberg', 'ditherHalftone', 'dither8Bit'];
                var functions = document.getElementById("experimental").checked ? orig.concat(exp) : orig;
                for(var i = 0;i<functions.length;i++){
                  setTimeout((function(functions, i, ctx, canvas) {
                    ctx.drawImage(img, 0, 0);
                    drawDitherResult(canvas,functions[i],functions[i]);
                  })(functions, i, ctx, canvas), 0);
                }
            };
            img.src = e.target.result;
        };
        reader.readAsDataURL(file);
        document.getElementById("output").innerHTML = "";
    }
    document.getElementById('uploader').addEventListener('change', handleFileSelect, false);
</script>
